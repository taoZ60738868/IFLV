# IFLV (假驴子) 更新日志

本文档记录IFLV项目的所有重要变更。

## [1.1.0] - 2024-03-15

### 新增功能

#### EPG数据处理
- 增强的EPG数据解析算法，提高解析速度和准确性
- 智能数据优化，减少EPG文件大小，仅保留未来7天节目信息
- 语言优先级设置，可选择首选显示语言

#### 版本与公告系统
- 添加版本更新公告系统，通过路由器界面实时获取更新信息
- 支持历史公告查看和本地公告发布
- 系统通知集成，新版本可推送通知到路由器

### 优化改进

#### EPG处理性能
- 使用awk替代grep进行大文件处理，显著提高性能
- 优化XML解析逻辑，减少内存占用
- 增加EPG处理统计，提供详细的优化效果报告

#### 文档与用户体验
- 完整的用户手册，包含安装指南、使用教程和故障排查
- 更详细的常见问题解决方案
- 各平台客户端安装步骤指导

### 修复问题
- 修复特定条件下EPG匹配失败的问题
- 解决非UTF-8编码EPG源解析错误
- 优化目录结构，删除无用文件

### 致谢与参考

本版本在开发过程中参考和借鉴了以下项目的代码和功能：

- **[iptv-api](https://github.com/Guovin/iptv-api/)**: 
  参考其EPG解析引擎设计和多源数据合并逻辑

- **[luci-app-store](https://github.com/jiecai58/luci-app-store)**: 
  参考其LuCI界面框架和版本更新机制实现

- **[iptv-tool](https://github.com/super321/iptv-tool)**: 
  参考其频道扫描功能和协议识别方式

- **[IPTV组播转发方案](https://www.right.com.cn/forum/thread-8319904-1-1.html)**: 
  参考其组播转单播核心实现思路

- **[IPTV地址提取工具](https://github.com/gyssi007/-IPTV-/blob/main/IPTV%E5%9C%B0%E5%9D%80%E6%8F%90%E5%8F%96%E5%B7%A5%E5%85%B7.html)**: 
  参考其IPTV地址识别与处理方法

- **[xinjiawei/iptv](https://github.com/xinjiawei/iptv)**: 
  参考其客户端实现和流媒体协议处理方式

- **[OpenWRT IPTV助手](https://www.right.com.cn/FORUM/thread-8413979-1-1.html)**: 
  参考其IGMP代理配置方法和网络接口处理逻辑

## [1.0.1] - 2024-03-10

### 新增功能

#### EPG更新功能
- 添加EPG数据备份机制，确保所有数据源失效时仍能使用最近的有效数据
- 实现自动频道匹配功能，智能关联频道与EPG数据
- 添加锁文件超时检测，防止僵尸进程阻塞更新

#### 下载服务器
- 增加HTTPS支持，自动生成自签名SSL证书
- 添加客户端版本自动更新检查
- 支持用户身份验证保护下载服务
- 重新设计现代化下载页面UI

### 优化改进

#### EPG更新功能
- 改进错误处理机制，支持从多个数据源获取EPG并在失败时自动切换
- 增强日志记录，提供更详细的执行信息
- 优化文件处理逻辑，提高EPG数据处理效率

#### 下载服务器
- 改进客户端版本管理，支持从官方源获取最新版本信息
- 优化下载服务的资源占用
- 增强安全性，防止未授权访问

### 修复问题
- 修复EPG更新过程中可能出现的锁文件残留问题
- 解决下载服务在部分路由器上无法启动的兼容性问题
- 修复多个数据源合并时可能出现的XML格式错误

## [1.0.0] - 2024-03-01

### 初始版本发布
- 支持智能组播转单播转换
- 提供基本的EPG节目单管理
- 支持多种流媒体协议
- 集成客户端下载服务
- 支持多种路由器架构
- 兼容多平台客户端 